{"componentChunkName":"component---src-pages-edge-lab-config-mdx","path":"/edge-lab/config/","result":{"pageContext":{"frontmatter":{"title":"Lab Configuration","description":"None"},"relativePagePath":"/edge-lab/config.mdx","titleType":"append","MdxNode":{"id":"0cd16097-422c-5b78-818e-a0a54c036d82","children":[],"parent":"c587b513-919d-59a1-879c-49870ce14f4c","internal":{"content":"---\ntitle: Lab Configuration\ndescription: None\n---\n\n<PageDescription>\n\nIn this section you find instruction for setting up the lab.\n\n</PageDescription>\n\n## Agent Installation and Registration\n\n```\nexport CLUSTER_URL=https://$(oc get cm management-ingress-ibmcloud-cluster-info -o jsonpath='{.data.cluster_ca_domain}')\nexport ADMIN_USER=$(oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_username}' | base64 --decode)\nexport ADMIN_PWD=$(oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 --decode)\ncloudctl login -a $CLUSTER_URL -u $ADMIN_USER -p ADMIN_PWD --skip-ssl-validation -n ibm-edge\n\nexport ROOT_PASS=$(oc get secret $CUSTOM_RESOURCE-auth -o jsonpath='{.data.exchange-root-pass}' | base64 --decode | grep '.*')\nexport CUSTOM_RESOURCE=$(oc get eamhub | grep -c -v NAME)\nexport EDGE_AGBOT_ID=$(oc get cm $CUSTOM_RESOURCE-config -o jsonpath=\"{.data.agbot_id}\" | grep '.*')\nexport CA_DOMAIN=$(oc get cm management-ingress-ibmcloud-cluster-info -o jsonpath='{.data.cluster_ca_domain}'\nexport HZN_EXCHANGE_URL=https://$CA_DOMAIN/edge-exchange/v1\nexport HZN_EXCHANGE_USER_AUTH=\"root/root:$ROOT_PASS\"\nexport CLUSTER_CA_CERT=$(oc get secret management-ingress-ibmcloud-cluster-ca-cert -o jsonpath=\"{.data['ca\\.crt']}\" | base64 --decode | grep '.*')\necho \"$CLUSTER_CA_CERT\" > /tmp/ieam_cluster_ca.crt\nexport HZN_MGMT_HUB_CERT_PATH=/tmp/ieam_cluster_ca.crt\nexport NEW_ORG_ID=thinkedge\ncloudctl iam roles\ncloudctl iam groups\ncloudctl iam teams\ncloudctl iam accounts\nexport IAM_ACCOUNT_NAME='mycluster Account'\nIAM_ACCOUNT_ID=$(cloudctl iam account \"$IAM_ACCOUNT_NAME\" | grep -E '^ID' | awk '{print $2}')\n# export IAM_TEAM_ID=$(cloudctl iam teams -s | grep -m 1 \"$IAM_ACCOUNT_NAME\" | awk '{print $1}')\nexport IAM_TEAM_ID=edgeadmins\nexport IAM_RESOURCE_ID=$(cloudctl iam resources | grep ':n/ibm-edge:')\ncloudctl iam resource-add $IAM_TEAM_ID -r $IAM_RESOURCE_ID\nhzn exchange user create -o $NEW_ORG_ID -A markus \"\" \"markus@does.not.exist\"\nhzn exchange user setadmin 'markus' 'true' -o $NEW_ORG_ID\n```\n\n<InlineNotification kind=\"info\">\n\n**Note:** These steps above are not all required.\n\n</InlineNotification>\n\n## Create an API-key for each user\n\n```\nIAM_USER=<iam-user>\ncloudctl login -a <cluster-url> -u $IAM_USER -p <iam-user-password> -c $IAM_ACCOUNT_ID --skip-ssl-validation\ncloudctl iam api-key-create \"${IAM_USER}-api-key\" -d \"API key for $IAM_USER\"\n# IAM_USER_API_KEY=$(cloudctl iam api-key-create \"${IAM_USER}-api-key\" -d \"API key for $IAM_USER\" | grep -E '^API Key' | awk '{print $3}')\n```\n\n## Verify API-key\n\n```\nIAM_USER_API_KEY=<IAM API key you just created>\n\nexport HZN_ORG_ID=<organization-id>\nexport HZN_EXCHANGE_USER_AUTH=iamapikey:$IAM_USER_API_KEY\nhzn exchange user list\n```\n\n\n\nTo check [Requirements](/edge-lab/requirements)\n\nThe IBM Edge Application Manager should not list any or your device as shown below\n![IEAM-nonode](./images/IEAM-nonode.png)\n\n\n<Accordion>\n  <AccordionItem title=\"output\">\n\nSome text\n\n  </AccordionItem>\n</Accordion>\n\n","type":"Mdx","contentDigest":"f71116b0fa0921fe0b4838e9660f7d8c","owner":"gatsby-plugin-mdx","counter":321},"frontmatter":{"title":"Lab Configuration","description":"None"},"exports":{},"rawBody":"---\ntitle: Lab Configuration\ndescription: None\n---\n\n<PageDescription>\n\nIn this section you find instruction for setting up the lab.\n\n</PageDescription>\n\n## Agent Installation and Registration\n\n```\nexport CLUSTER_URL=https://$(oc get cm management-ingress-ibmcloud-cluster-info -o jsonpath='{.data.cluster_ca_domain}')\nexport ADMIN_USER=$(oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_username}' | base64 --decode)\nexport ADMIN_PWD=$(oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 --decode)\ncloudctl login -a $CLUSTER_URL -u $ADMIN_USER -p ADMIN_PWD --skip-ssl-validation -n ibm-edge\n\nexport ROOT_PASS=$(oc get secret $CUSTOM_RESOURCE-auth -o jsonpath='{.data.exchange-root-pass}' | base64 --decode | grep '.*')\nexport CUSTOM_RESOURCE=$(oc get eamhub | grep -c -v NAME)\nexport EDGE_AGBOT_ID=$(oc get cm $CUSTOM_RESOURCE-config -o jsonpath=\"{.data.agbot_id}\" | grep '.*')\nexport CA_DOMAIN=$(oc get cm management-ingress-ibmcloud-cluster-info -o jsonpath='{.data.cluster_ca_domain}'\nexport HZN_EXCHANGE_URL=https://$CA_DOMAIN/edge-exchange/v1\nexport HZN_EXCHANGE_USER_AUTH=\"root/root:$ROOT_PASS\"\nexport CLUSTER_CA_CERT=$(oc get secret management-ingress-ibmcloud-cluster-ca-cert -o jsonpath=\"{.data['ca\\.crt']}\" | base64 --decode | grep '.*')\necho \"$CLUSTER_CA_CERT\" > /tmp/ieam_cluster_ca.crt\nexport HZN_MGMT_HUB_CERT_PATH=/tmp/ieam_cluster_ca.crt\nexport NEW_ORG_ID=thinkedge\ncloudctl iam roles\ncloudctl iam groups\ncloudctl iam teams\ncloudctl iam accounts\nexport IAM_ACCOUNT_NAME='mycluster Account'\nIAM_ACCOUNT_ID=$(cloudctl iam account \"$IAM_ACCOUNT_NAME\" | grep -E '^ID' | awk '{print $2}')\n# export IAM_TEAM_ID=$(cloudctl iam teams -s | grep -m 1 \"$IAM_ACCOUNT_NAME\" | awk '{print $1}')\nexport IAM_TEAM_ID=edgeadmins\nexport IAM_RESOURCE_ID=$(cloudctl iam resources | grep ':n/ibm-edge:')\ncloudctl iam resource-add $IAM_TEAM_ID -r $IAM_RESOURCE_ID\nhzn exchange user create -o $NEW_ORG_ID -A markus \"\" \"markus@does.not.exist\"\nhzn exchange user setadmin 'markus' 'true' -o $NEW_ORG_ID\n```\n\n<InlineNotification kind=\"info\">\n\n**Note:** These steps above are not all required.\n\n</InlineNotification>\n\n## Create an API-key for each user\n\n```\nIAM_USER=<iam-user>\ncloudctl login -a <cluster-url> -u $IAM_USER -p <iam-user-password> -c $IAM_ACCOUNT_ID --skip-ssl-validation\ncloudctl iam api-key-create \"${IAM_USER}-api-key\" -d \"API key for $IAM_USER\"\n# IAM_USER_API_KEY=$(cloudctl iam api-key-create \"${IAM_USER}-api-key\" -d \"API key for $IAM_USER\" | grep -E '^API Key' | awk '{print $3}')\n```\n\n## Verify API-key\n\n```\nIAM_USER_API_KEY=<IAM API key you just created>\n\nexport HZN_ORG_ID=<organization-id>\nexport HZN_EXCHANGE_USER_AUTH=iamapikey:$IAM_USER_API_KEY\nhzn exchange user list\n```\n\n\n\nTo check [Requirements](/edge-lab/requirements)\n\nThe IBM Edge Application Manager should not list any or your device as shown below\n![IEAM-nonode](./images/IEAM-nonode.png)\n\n\n<Accordion>\n  <AccordionItem title=\"output\">\n\nSome text\n\n  </AccordionItem>\n</Accordion>\n\n","fileAbsolutePath":"/Users/mkeppel/Documents/GitHub/think-labs/src/pages/edge-lab/config.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}