{"componentChunkName":"component---src-pages-instana-lab-observe-mdx","path":"/instana-lab/observe/","result":{"pageContext":{"frontmatter":{"title":"Observe your Environment","description":"None"},"relativePagePath":"/instana-lab/observe.mdx","titleType":"append","MdxNode":{"id":"8a7ae705-bc2c-5a5b-9953-7fc9e15b512e","children":[],"parent":"3a48ed7d-89f9-5059-b60a-211b35b3d094","internal":{"content":"---\ntitle: Observe your Environment\ndescription: None\n---\n\n<PageDescription>\n\nIn this part of the the lab you will learn how Instana discovers your environment and observe the application you deploex on the infrastructure.\n\n</PageDescription>\n\n## Observe the environment\n\nGot to the infrastructure perspective in the Instana UI and filter the view to your environment by by entering `entity.tag:<your name>` in the search bar. You can get to the searchbar by pressing the shortcut `f`.\n\n<InlineNotification kind=\"info\">\n\n**Note:** You can save your Filter for future reuse by clicking **Save** next to the search and specifying a make like your username.\n\n</InlineNotification>\n\nCenter your environment and zoom in or out. Shortcut for center is `c`.\n\nOn the lower right you find different option to:\n* Arrange zone\n* Configure perspective and groups\n* Show tags\n* Enable/Disable time windows based aggregation\n* Show different metircs\n* Zoom in/out\n\nTry to filter and group your environment e.g. by:\n* everything in the environemnt with the tag `<your-name>`\n* everything in the kubernetes namespace `robot-shop`\n* grouped by container in a namespace\n* showing the CPU load\n\nYou should have a view like this\n![infrastructure-grouping](./images/infrastructure-grouping.png)\n\n\n<Accordion>\n  <AccordionItem title=\"Solution\">\n\n* In the search bar enter `entity.tag:think21 AND entity.kubernetes.namespace:robot-shop`\n\n* Select grouping by `persective: container and group: kubernetes namespace` from **Configure perspective and grouping on the lower right\n\n* Select `CPU load` from **Show metrics** on the lower right\n\n\nIf your interessed in a specific service, e.g. filter to `entity.tag:service=redis`.\n\n  </AccordionItem>\n</Accordion>\n\nReset the infrastructure view to display your environment grouped by host\n\n## Examine the environment\n\n1. To get an overview for your host click on the outer box of your host. A popup displaying the hostname and information for the system, tags, interfaces, etc. should appear.\nOpen the accordions and scroll down to see the list of descovered technologies. It should look like this:\n![instana-infrastructure-host](./images/instana-infrastructure-host.png)\n\n2. Click on `Open Dashboard` to get to a more detailed fullscreen view.\nAll information about you host is available to you. E.g.\n* CPU\n* Memory\n* Network\n* Filesytem\n* Processes\n* etc.\n\nOn the top left you can change the time range or releases that is displayed, this might be very helpful if you search for issues during a specific period. The Live view display the actual state in the time period you have selected. Teh information is updated ervery second, so that you see imedeately what is going in your environment.\n\nAt the bottom of the page you can go to the agent managagement to get information about the Instana agent running to this host or make configuration changes to the agent, e.g.:\n* Change the agent mode (APM, Infrastructure, Disabled)\n* Change Log Level (INFO, DEBUG)\n\nYou can also get a list of sensors information, that is available for the agent. Since we are using the dynamic agent, it should always get acutal sensors from the Instana sensor repository.\nVery helpful is also the option to download the agent logs.\nThe configuration management can also use configuration files from a git repostory, this will enable you to configure all or groups of you agents through a central configuration point.\n\nNow that you are familar with the inrastructure view, go ahead and do some observation on the application you deployed\n\n## Examine the application services\n\n1. Lets put on some load\n\n```yaml\ncat <<EOF | kubectl create -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: load\n  labels:\n    service: load\n    instana-autotrace: \"false\"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      service: load\n  template:\n    metadata:\n      labels:\n        service: load\n        instana-autotrace: \"false\"\n    spec:\n      containers:\n      - name: load\n        env:\n          - name: HOST\n            value: \"http://web:8080/\"\n          - name: NUM_CLIENTS\n            value: \"15\"\n          - name: SILENT\n            value: \"1\"\n          - name: ERROR\n            value: \"1\"\n        image: robotshop/rs-load:latest\n        resources:\n          limits:\n            cpu: 200m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\nEOF\n```\n\n2. Go to the application view in the Instana UI\nYou will see all applications and services based on your rights. Instana supports multi-tenancy, but for the lab all participants are in the same organization.\nTo create a view for your services click `+ Add` and `New Application Perspective` on the bottom right.\n\nSee the different application kinds and the recommendations when to use it. We are moniting an application running on kubernetes, therefore select **Kubernetes or Container** and press **Next**\n![instana-services-view-1](./images/instana-services-view-1.png)\n\nAdd a filter to the application perspective to only view the application services running on your cluster. Either click add filter and type the filter or select it from the dropdown menue.\n* kubernetes.namespace = robot-shop\n* kubernetes.clustername = &lt;your clustername&gt;\n\nSelect the donwstream services and click **Next**\n![instana-services-view-2](./images/instana-services-view-2.png)\n\nFinally give the **Application Perspective** a unique name `<yourname> Robot Shop` and select **All Calls**\nClick **Create** to add and display the perspective.\n![instana-services-view-3](./images/instana-services-view-3.png)\n\nYour **Application Perspective** should look like this.\n![instana-application-perspective](./images/instana-application-perspective.png)\n\n8. Lets look for issues and performance\n\nIf you switch back to the summary tab, you can see that there are erroneous calls reported. Hover over the bars and after some examination click on one of the bars and select `View in Analyse`.\n\nThe view will switch to analyse and show the erroneous calls in the appropriate time period. You should see a lot of calls with issues in the payment service.\n![instana-analyse-erroneouscalls](./images/instana-analyse-erroneouscalls.png)\n\nClicking on the payment Service should show all calls.\n![instana-analyse-payments](./images/instana-analyse-payments.png)\n\nSelect one of the calls see details of this call.\n![instana-analyse-payments](./images/instana-analyse-payment-details.png)\n\nScroll down to **Calls** and select the POST call - can see the issue?\n![instana-analyse-payment-calldetails](./images/instana-analyse-payment-calldetails.png)\n\n<Accordion>\n  <AccordionItem title=\"Issue\">\n\nYou shoud see that the payment checks it the partner exists by issuing a GET call which queries to the database. The database returns an empty object if the partner does not exist, which cannot be validated and therefore reports a `Status Code: 500 - Internal Server Error`\n\nGood Job, the error can be fixed now!!!\n\n```bash\nkubectl set env deployment/load ERROR=0\n```\n\n  </AccordionItem>\n</Accordion>\n\n9. Stop the load\n\n```bash\nkubectl delete deployment load\n```\n","type":"Mdx","contentDigest":"18eaf2ac7b5c59d9bc667b67ee5a088d","owner":"gatsby-plugin-mdx","counter":304},"frontmatter":{"title":"Observe your Environment","description":"None"},"exports":{},"rawBody":"---\ntitle: Observe your Environment\ndescription: None\n---\n\n<PageDescription>\n\nIn this part of the the lab you will learn how Instana discovers your environment and observe the application you deploex on the infrastructure.\n\n</PageDescription>\n\n## Observe the environment\n\nGot to the infrastructure perspective in the Instana UI and filter the view to your environment by by entering `entity.tag:<your name>` in the search bar. You can get to the searchbar by pressing the shortcut `f`.\n\n<InlineNotification kind=\"info\">\n\n**Note:** You can save your Filter for future reuse by clicking **Save** next to the search and specifying a make like your username.\n\n</InlineNotification>\n\nCenter your environment and zoom in or out. Shortcut for center is `c`.\n\nOn the lower right you find different option to:\n* Arrange zone\n* Configure perspective and groups\n* Show tags\n* Enable/Disable time windows based aggregation\n* Show different metircs\n* Zoom in/out\n\nTry to filter and group your environment e.g. by:\n* everything in the environemnt with the tag `<your-name>`\n* everything in the kubernetes namespace `robot-shop`\n* grouped by container in a namespace\n* showing the CPU load\n\nYou should have a view like this\n![infrastructure-grouping](./images/infrastructure-grouping.png)\n\n\n<Accordion>\n  <AccordionItem title=\"Solution\">\n\n* In the search bar enter `entity.tag:think21 AND entity.kubernetes.namespace:robot-shop`\n\n* Select grouping by `persective: container and group: kubernetes namespace` from **Configure perspective and grouping on the lower right\n\n* Select `CPU load` from **Show metrics** on the lower right\n\n\nIf your interessed in a specific service, e.g. filter to `entity.tag:service=redis`.\n\n  </AccordionItem>\n</Accordion>\n\nReset the infrastructure view to display your environment grouped by host\n\n## Examine the environment\n\n1. To get an overview for your host click on the outer box of your host. A popup displaying the hostname and information for the system, tags, interfaces, etc. should appear.\nOpen the accordions and scroll down to see the list of descovered technologies. It should look like this:\n![instana-infrastructure-host](./images/instana-infrastructure-host.png)\n\n2. Click on `Open Dashboard` to get to a more detailed fullscreen view.\nAll information about you host is available to you. E.g.\n* CPU\n* Memory\n* Network\n* Filesytem\n* Processes\n* etc.\n\nOn the top left you can change the time range or releases that is displayed, this might be very helpful if you search for issues during a specific period. The Live view display the actual state in the time period you have selected. Teh information is updated ervery second, so that you see imedeately what is going in your environment.\n\nAt the bottom of the page you can go to the agent managagement to get information about the Instana agent running to this host or make configuration changes to the agent, e.g.:\n* Change the agent mode (APM, Infrastructure, Disabled)\n* Change Log Level (INFO, DEBUG)\n\nYou can also get a list of sensors information, that is available for the agent. Since we are using the dynamic agent, it should always get acutal sensors from the Instana sensor repository.\nVery helpful is also the option to download the agent logs.\nThe configuration management can also use configuration files from a git repostory, this will enable you to configure all or groups of you agents through a central configuration point.\n\nNow that you are familar with the inrastructure view, go ahead and do some observation on the application you deployed\n\n## Examine the application services\n\n1. Lets put on some load\n\n```yaml\ncat <<EOF | kubectl create -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: load\n  labels:\n    service: load\n    instana-autotrace: \"false\"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      service: load\n  template:\n    metadata:\n      labels:\n        service: load\n        instana-autotrace: \"false\"\n    spec:\n      containers:\n      - name: load\n        env:\n          - name: HOST\n            value: \"http://web:8080/\"\n          - name: NUM_CLIENTS\n            value: \"15\"\n          - name: SILENT\n            value: \"1\"\n          - name: ERROR\n            value: \"1\"\n        image: robotshop/rs-load:latest\n        resources:\n          limits:\n            cpu: 200m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\nEOF\n```\n\n2. Go to the application view in the Instana UI\nYou will see all applications and services based on your rights. Instana supports multi-tenancy, but for the lab all participants are in the same organization.\nTo create a view for your services click `+ Add` and `New Application Perspective` on the bottom right.\n\nSee the different application kinds and the recommendations when to use it. We are moniting an application running on kubernetes, therefore select **Kubernetes or Container** and press **Next**\n![instana-services-view-1](./images/instana-services-view-1.png)\n\nAdd a filter to the application perspective to only view the application services running on your cluster. Either click add filter and type the filter or select it from the dropdown menue.\n* kubernetes.namespace = robot-shop\n* kubernetes.clustername = &lt;your clustername&gt;\n\nSelect the donwstream services and click **Next**\n![instana-services-view-2](./images/instana-services-view-2.png)\n\nFinally give the **Application Perspective** a unique name `<yourname> Robot Shop` and select **All Calls**\nClick **Create** to add and display the perspective.\n![instana-services-view-3](./images/instana-services-view-3.png)\n\nYour **Application Perspective** should look like this.\n![instana-application-perspective](./images/instana-application-perspective.png)\n\n8. Lets look for issues and performance\n\nIf you switch back to the summary tab, you can see that there are erroneous calls reported. Hover over the bars and after some examination click on one of the bars and select `View in Analyse`.\n\nThe view will switch to analyse and show the erroneous calls in the appropriate time period. You should see a lot of calls with issues in the payment service.\n![instana-analyse-erroneouscalls](./images/instana-analyse-erroneouscalls.png)\n\nClicking on the payment Service should show all calls.\n![instana-analyse-payments](./images/instana-analyse-payments.png)\n\nSelect one of the calls see details of this call.\n![instana-analyse-payments](./images/instana-analyse-payment-details.png)\n\nScroll down to **Calls** and select the POST call - can see the issue?\n![instana-analyse-payment-calldetails](./images/instana-analyse-payment-calldetails.png)\n\n<Accordion>\n  <AccordionItem title=\"Issue\">\n\nYou shoud see that the payment checks it the partner exists by issuing a GET call which queries to the database. The database returns an empty object if the partner does not exist, which cannot be validated and therefore reports a `Status Code: 500 - Internal Server Error`\n\nGood Job, the error can be fixed now!!!\n\n```bash\nkubectl set env deployment/load ERROR=0\n```\n\n  </AccordionItem>\n</Accordion>\n\n9. Stop the load\n\n```bash\nkubectl delete deployment load\n```\n","fileAbsolutePath":"/Users/mkeppel/Documents/GitHub/think-labs/src/pages/instana-lab/observe.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}