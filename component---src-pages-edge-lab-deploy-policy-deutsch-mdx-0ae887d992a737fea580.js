(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"0xFZ":function(e,n,i){"use strict";i.r(n),i.d(n,"_frontmatter",(function(){return a})),i.d(n,"default",(function(){return u}));var t=i("vxd2"),r=i("+ZQ4"),l=(i("tbR7"),i("8ZXK")),c=i("ZUrL"),a=(i("GP0y"),{}),s=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(l.b)("div",n)}},o=s("PageDescription"),b=s("InlineNotification"),d={_frontmatter:a},h=c.a;function u(e){var n=e.components,i=Object(r.a)(e,["components"]);return Object(l.b)(h,Object(t.a)({},d,i,{components:n,mdxType:"MDXLayout"}),Object(l.b)(o,{mdxType:"PageDescription"},Object(l.b)("p",null,"In diesem Abschnitt stellen Sie den Edge-Dienst, den Sie in einem vorherigen Schritt erstellt haben, in Ihrer Edge-Umgebung bereit.")),Object(l.b)("h2",null,"Bereitstellen eines Edge-Services mit einer Bereitstellungsrichtlinie"),Object(l.b)("h3",null,"Voraussetzungen für das Deployment eines eigenen Dienstes"),Object(l.b)("p",null,"  Wenn Sie dies noch nicht getan haben, schließen Sie den Abschnitt ",Object(l.b)("a",Object(t.a)({parentName:"p"},{href:"../service/deutsch"}),"Erstellen eines Edge-Dienstes")),Object(l.b)("h3",null,"Verwenden des Edge-Dienstes mit Bereitstellungsrichtlinie"),Object(l.b)("p",null,"Der Horizon-Richtlinienmechanismus bietet eine Alternative zur Verwendung vonBereitstellungsmustern. Richtlinien bieten eine viel feinere Kontrolle über die Bereitstellungsplatzierung von Edge-Services. Er bietet auch eine größere Trennung der Belange, so dass die Eigentümer der Edge-Knoten, die Entwickler des Service-Codes und die Eigentümer des Unternehmens jeweils unabhängig voneinander ihre eigenen Richtlinien formulieren können. Es gibt daher drei Arten von Horizon Policies:"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Knotenrichtlinie (wird bei der Registrierung vom Knoteneigentümer bereitgestellt)")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Service-Richtlinie (kann auf einen veröffentlichten Service im Exchange angewendet werden)")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"DDeployment Policy (entspricht ungefähr einem Deployment Pattern)"))),Object(l.b)("h2",null,"Knotenrichtlinie"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Alternativ zur Angabe eines Bereitstellungsmusters bei der Registrierung Ihres Edge-Knotens können Sie sich auch mit einer Knotenrichtlinie registrieren.")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Holen Sie sich die erforderliche helloworld Knotenrichtliniendatei:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"wget https://raw.githubusercontent.com/open-horizon/examples/master/edge/services/helloworld/horizon/node.policy.json\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Nachfolgend finden Sie die Datei node.policy.json, die Sie in Schritt 1 erhalten haben:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),'{\n  "properties": [\n    { "name": "openhorizon.example", "value": "hello-$USER_ID" }\n  ],\n  "constraints": [\n  ]\n}\n')),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Sie enthält Werte für eine Eigenschaft (openhorizon.example). Ändern Sie den Wert in ",Object(l.b)("strong",{parentName:"li"},"hello-$USER_ID"),", um die Dienste, die auf diesem Edge-Knoten bereitgestellt werden, auf Ihren hello-Dienst zu beschränken.")),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"Registrieren Sie Ihre Node Policy mit dieser Policy")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn register --policy node.policy.json\n")),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Wenn die Registrierung abgeschlossen ist, verwenden Sie den folgenden Befehl, um die Knotenrichtlinie zu überprüfen:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn policy list\n")),Object(l.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Beachten")," Sie, dass Horizon zusätzlich zu den drei Eigenschaften, die in der Datei node_policy.json angegeben sind, einige weitere hinzugefügt hat (openhorizon.cpu, openhorizon.arch und openhorizon.memory). Horizon stellt diese zusätzlichen Informationen automatisch bereit, und diese Eigenschaften können in jeder Ihrer Richtlinieneinschränkungen verwendet werden.")),Object(l.b)("p",null,"Ihr Gerät sollte nun auch in Active ohne Dienste in der IBM Edge Application Manager-Benutzeroberfläche sichtbar sein\n",Object(l.b)("img",Object(t.a)({parentName:"p"},{src:"../images/IEAM-node-active.png",alt:"IEAM-node-active"}))),Object(l.b)("h2",null,"Service-Richtlinie"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Wie die beiden anderen Policy-Typen enthält auch die Service-Policy einen Satz von Eigenschaften und einen Satz von Beschränkungen. Die Eigenschaften einer\nDienstrichtlinie können Merkmale des Dienstcodes angeben, die für die Autoren von Knotenrichtlinien oder Bereitstellungsrichtlinien relevant sein können. Die Einschränkungen einer Dienstrichtlinie können verwendet werden, um einzuschränken, wo dieser Dienst ausgeführt werden kann. Der Entwickler des Dienstes könnte z. B. angeben, dass dieser Dienst eine bestimmte Hardwarekonfiguration benötigt, wie z. B. CPU/GPU-Einschränkungen, Speichereinschränkungen, bestimmte Sensoren, Aktoren oder andere erforderliche Peripheriegeräte usw."),Object(l.b)("li",{parentName:"ul"},"Nachfolgend finden Sie die Datei ",Object(l.b)("strong",{parentName:"li"},"service.policy.json"),", die im Rahmen der Erstellung Ihres Dienstes im Verzeichnis horizon erstellt wurde:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),'{\n  "properties": [\n  ],\n  "constraints": [\n    "openhorizon.memory >= 100"\n  ]\n}\n')),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Sehen Sie sich die veröffentlichte Service-Richtlinie an, die an Ihren Service angehängt wurde:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn exchange service listpolicy ${HZN_ORG_ID}/hello-${USER_ID}_0.0.1_$(hzn architecture)\n")),Object(l.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Beachten")," Sie, dass die generierte Dienstrichtlinie nicht automatisch zum Zeitpunkt der Veröffentlichung zu Ihrem Dienst hinzugefügt wird.")),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"Erstellen Sie eine ",Object(l.b)("strong",{parentName:"li"},"service.policy.json")," Datei mit folgendem Inhalt")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),'{\n  "properties": [\n  ],\n  "constraints": [\n    "openhorizon.memory >= 100"\n  ]\n}\n')),Object(l.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Beachten")," Sie, dass diese einfache Service-Richtlinie keine Eigenschaften bereitstellt, aber eine Einschränkung enthält. Diese Beispielbeschränkung ist eine, die ein Dienstentwickler hinzufügen könnte und die besagt, dass sein Dienst nur auf Edge-Knoten mit 100 MB oder mehr Speicher ausgeführt werden darf.")),Object(l.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Beachten")," Sie, dass Horizon wieder automatisch einige zusätzliche Eigenschaften zu Ihrer Richtlinie hinzugefügt hat. Diese generierten Eigenschaftswerte können in Einschränkungen in Node Policies und Deployment Policies verwendet werden.")),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Aktualisieren Sie die an Ihren Dienst angehängte service.policies")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn exchange service addpolicy -f service.policy.json ${HZN_ORG_ID}/hello-${USER_ID}_0.0.1_$(hzn architecture)\n")),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"Zeigen Sie die veröffentlichten Aktualisierungen der an Ihren Dienst angehängten Dienstrichtlinie an:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn exchange service listpolicy ${HZN_ORG_ID}/hello-${USER_ID}_0.0.1_$(hzn architecture)\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Nun, da Sie die Richtlinie für Ihren Edge-Knoten eingerichtet haben und die veröffentlichte Service-Richtlinie im Austausch ist, können wir zum letzten Schrittübergehen und eine Bereitstellungsrichtlinie definieren, um alles miteinander zu verknüpfen und zu bewirken, dass die Software automatisch auf Ihrem Edge-Knoten bereitgestellt wird.")),Object(l.b)("h2",null,"Bereitstellungsrichtlinie"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Die Bereitstellungsrichtlinie ist das, was Edge-Knoten, veröffentlichte Dienste und die für diese definierten Richtlinien miteinander verbindet, und ist damit in etwa analog zu den Bereitstellungsmustern, mit denen Sie zuvor gearbeitet haben."),Object(l.b)("li",{parentName:"ul"},"Die Bereitstellungsrichtlinie enthält wie die beiden anderen Richtlinientypen einen Satz von Eigenschaften und einen Satz von Einschränkungen, aber sie enthält auch noch andere Dinge. Zum Beispiel identifiziert sie explizit den Dienst,der bei erfolgreicher Verhandlung auf Edge-Knoten bereitgestellt wird, zusätzlich zu den Werten der Konfigurationsvariablen und erfüllt damit die gleiche Funktion wie die Klausel -f horizon/userinput.json eines Deployment-Pattern-Befehls hzn register … Der Deployment Policy-Ansatz für Konfigurationswerte ist leistungsfähiger, da dieser Vorgang zentral durchgeführt werden kann (keine direkte Verbindung zum Edge-Knoten erforderlich).")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Erstellen Sie für Ihren Dienst eine Datei ",Object(l.b)("strong",{parentName:"li"},"deployment.policy.json")," mit dem unten stehenden Inhalt:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),'{\n  "label": "$SERVICE_NAME Deployment Policy",\n  "description": "A super-simple sample Horizon Deployment Policy",\n  "service": {\n    "name": "$SERVICE_NAME",\n    "org": "$HZN_ORG_ID",\n    "arch": "*",\n    "serviceVersions": [\n      {\n        "version": "$SERVICE_VERSION",\n        "priority":{}\n      }\n    ]\n  },\n  "properties": [\n  ],\n  "constraints": [\n    "openhorizon.example == hello-$USER_ID"\n  ],\n  "userInput": [\n    {\n      "serviceOrgid": "$HZN_ORG_ID",\n      "serviceUrl": "$SERVICE_NAME",\n      "serviceVersionRange": "[0.0.0,INFINITY)",\n      "inputs": [\n        {\n          "name": "HW_WHO",\n          "value": "Valued Customer"\n        }\n      ]\n    }\n  ]\n}\n')),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Dieses einfache Beispiel einer Deployment-Richtlinie bietet keine Eigenschaften, aber es hat einen Einschränkungswert, der durch die in der Datei node.policy.json festgelegten Eigenschaften erfüllt wird, sodass diese Deployment-Richtlinie unseren Dienst erfolgreich auf dem Edge-Knoten bereitstellen sollte."),Object(l.b)("li",{parentName:"ul"},"Am Ende hat der userInput-Abschnitt denselben Zweck wie die horizon/userinput.json-Dateien, die für andere Beispiele bereitgestellt werden, wenn die angegebenen Dienste sie benötigen. In diesem Fall definiert der helloworld Service nur eine Konfigurationsvariable, HW_WHO, und der userInput-Abschnitt liefert hier einen Wert für HW_WHO (d. h., Valued Customer).")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Veröffentlichen und zeigen Sie Ihre Bereitstellungsrichtlinie in Horizon Exchange an:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn exchange deployment addpolicy -f deployment.policy.json ${HZN_ORG_ID}/policy-hello-${USER_ID}_0.0.1\nhzn exchange deployment listpolicy ${HZN_ORG_ID}/policy-hello-${USER_ID}_0.0.1\n")),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"Inzwischen sollte Ihr Edge-Gerät eine Vereinbarung mit einem der Horizon-Vereinbarungsbots geschlossen haben (dies dauert in der Regel etwa 15 Sekunden). Fragen Sie wiederholt die Vereinbarungen dieses Geräts ab, bis die Felder agreement_finalized_time und agreement_execution_start_time ausgefülltsind:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn agreement list\n")),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},"Führen Sie nach Abschluss der Vereinbarung den Edge-Service-Docker-Container auf, der daraufhin gestartet wurde:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"sudo docker ps\n")),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"Sehen Sie sich die Ausgabe des helloworld-Dienstes an:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"sudo hzn service log -f hello-$USER_ID\n")),Object(l.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Hinweis:")," Drücken Sie Ctrl C, um die Befehlsausgabe zu stoppen.")),Object(l.b)("p",null,"Schauen Sie erneut in die IBM Edge Application Manager UI, Ihr Gerät sollte den Status ",Object(l.b)("strong",{parentName:"p"},"Aktiv mit Diensten")," anzeigen\n",Object(l.b)("img",Object(t.a)({parentName:"p"},{src:"../images/IEAM-node-active-service.png",alt:"IEAM-node-active-service"}))),Object(l.b)("ol",{start:5},Object(l.b)("li",{parentName:"ol"},"Heben Sie die Registrierung Ihres Edge-Knotens auf:")),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"hzn unregister -f\n")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-edge-lab-deploy-policy-deutsch-mdx-0ae887d992a737fea580.js.map