{"version":3,"sources":["webpack:///../instana-lab/src/pages/instana-lab/observe.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","InlineNotification","Accordion","AccordionItem","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","kind","title","isMDXComponent"],"mappings":"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","file":"component---src-pages-instana-lab-observe-mdx-4f2eebc63cecf36ecced.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/mkeppel/Documents/GitHub/instana-lab/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst Accordion = makeShortcode(\"Accordion\");\nconst AccordionItem = makeShortcode(\"AccordionItem\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`In this part of the the lab you will learn how Instana discovers your environment and observe the application you deploex on the infrastructure.`}</p>\n    </PageDescription>\n    <h2>{`Observe the environment`}</h2>\n    <p>{`Got to the infrastructure perspective in the Instana UI and filter the view to your environment by by entering `}<inlineCode parentName=\"p\">{`entity.tag:<your name>`}</inlineCode>{` in the search bar. You can get to the searchbar by pressing the shortcut `}<inlineCode parentName=\"p\">{`f`}</inlineCode>{`. `}</p>\n    <InlineNotification kind=\"info\" mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` You can save your Filter for future reuse by clicking `}<strong parentName=\"p\">{`Save`}</strong>{` next to the search and specifying a make like your username.`}</p>\n    </InlineNotification>\n    <p>{`Center your environment and zoom in or out. Shortcut for center is `}<inlineCode parentName=\"p\">{`c`}</inlineCode>{`.`}</p>\n    <p>{`On the lower right you find different option to:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Arrange zone`}</li>\n      <li parentName=\"ul\">{`Configure perspective and groups`}</li>\n      <li parentName=\"ul\">{`Show tags`}</li>\n      <li parentName=\"ul\">{`Enable/Disable time windows based aggregation`}</li>\n      <li parentName=\"ul\">{`Show different metircs`}</li>\n      <li parentName=\"ul\">{`Zoom in/out`}</li>\n    </ul>\n    <p>{`Try to filter and group your environment e.g. by:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`everything in the environemnt with the tag `}<inlineCode parentName=\"li\">{`<your-name>`}</inlineCode></li>\n      <li parentName=\"ul\">{`everything in the kubernetes namespace `}<inlineCode parentName=\"li\">{`robot-shop`}</inlineCode></li>\n      <li parentName=\"ul\">{`grouped by container in a namespace`}</li>\n      <li parentName=\"ul\">{`showing the CPU load`}</li>\n    </ul>\n    <p>{`You should have a view like this\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/infrastructure-grouping.png\",\n        \"alt\": \"infrastructure-grouping\"\n      }}></img></p>\n    <Accordion mdxType=\"Accordion\">\n  <AccordionItem title=\"Solution\" mdxType=\"AccordionItem\">\n        <ul>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`In the search bar enter `}<inlineCode parentName=\"p\">{`entity.tag:think21 AND entity.kubernetes.namespace:robot-shop`}</inlineCode></p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Select grouping by `}<inlineCode parentName=\"p\">{`persective: container and group: kubernetes namespace`}</inlineCode>{` from **Configure perspective and grouping on the lower right`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Select `}<inlineCode parentName=\"p\">{`CPU load`}</inlineCode>{` from `}<strong parentName=\"p\">{`Show metrics`}</strong>{` on the lower right`}</p>\n          </li>\n        </ul>\n        <p>{`If your interessed in a specific service, e.g. filter to `}<inlineCode parentName=\"p\">{`entity.tag:service=redis`}</inlineCode>{`.`}</p>\n  </AccordionItem>\n    </Accordion>\n    <p>{`Reset the infrastructure view to display your environment grouped by host`}</p>\n    <h2>{`Examine the environment`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`To get an overview for your host click on the outer box of your host. A popup displaying the hostname and information for the system, tags, interfaces, etc. should appear.\nOpen the accordions and scroll down to see the list of descovered technologies. It should look like this:`}</li>\n    </ol>\n    <img {...{\n      \"src\": \"./images/instana-infrastructure-host.png\",\n      \"alt\": \"instana-infrastructure-host\"\n    }}></img>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Click on `}<inlineCode parentName=\"li\">{`Open Dashboard`}</inlineCode>{` to get to a more detailed fullscreen view.\nAll information about you host is available to you. E.g.`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`CPU`}</li>\n      <li parentName=\"ul\">{`Memory`}</li>\n      <li parentName=\"ul\">{`Network`}</li>\n      <li parentName=\"ul\">{`Filesytem`}</li>\n      <li parentName=\"ul\">{`Processes`}</li>\n      <li parentName=\"ul\">{`etc.`}</li>\n    </ul>\n    <p>{`On the top left you can change the time range or releases that is displayed, this might be very helpful if you search for issues during a specific period. The Live view display the actual state in the time period you have selected. Teh information is updated ervery second, so that you see imedeately what is going in your environment.`}</p>\n    <p>{`At the bottom of the page you can go to the agent managagement to get information about the Instana agent running to this host or make configuration changes to the agent, e.g.:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Change the agent mode (APM, Infrastructure, Disabled)`}</li>\n      <li parentName=\"ul\">{`Change Log Level (INFO, DEBUG)`}</li>\n    </ul>\n    <p>{`You can also get a list of sensors information, that is available for the agent. Since we are using the dynamic agent, it should always get acutal sensors from the Instana sensor repository.\nVery helpful is also the option to download the agent logs.\nThe configuration management can also use configuration files from a git repostory, this will enable you to configure all or groups of you agents through a central configuration point.`}</p>\n    <p>{`Now that you are familar with the inrastructure view, go ahead and do some observation on the application you deployed`}</p>\n    <h2>{`Examine the application services`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`Lets put on some load`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`cat <<EOF | kubectl create -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: load\n  labels:\n    service: load\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      service: load\n  template:\n    metadata:\n      labels:\n        service: load\n    spec:\n      containers:\n      - name: load\n        env:\n          - name: HOST\n            value: \"http://web:8080/\"\n          - name: NUM_CLIENTS\n            value: \"15\"\n          - name: SILENT\n            value: \"1\"\n          - name: ERROR\n            value: \"1\"\n        image: robotshop/rs-load:latest\n        resources:\n          limits:\n            cpu: 200m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\nEOF\n`}</code></pre>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Go to the application view in the Instana UI\nYou will see all applications and services based on your rights. Instana supports multi-tenancy, but for the lab all participants are in the same organization.\nTo create a view for your services click `}<inlineCode parentName=\"li\">{`+ Add`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`New Application Perspective`}</inlineCode>{` on the bottom right.`}</li>\n    </ol>\n    <p>{`See the different application kinds and the recommendations when to use it. We are moniting an application running on kubernetes, therefore select `}<strong parentName=\"p\">{`Kubernetes or Container`}</strong>{` and press `}<strong parentName=\"p\">{`Next`}</strong>{`\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-services-view-1.png\",\n        \"alt\": \"instana-services-view-1\"\n      }}></img></p>\n    <p>{`Add a filter to the application perspective to only view the application services running on your cluster. Either click add filter and type the filter or select it from the dropdown menue.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`kubernetes.namespace = robot-shop`}</li>\n      <li parentName=\"ul\">{`kubernetes.clustername = `}{`<`}{`your clustername`}{`>`}</li>\n    </ul>\n    <p>{`Select the donwstream services and click `}<strong parentName=\"p\">{`Next`}</strong>{`\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-services-view-2.png\",\n        \"alt\": \"instana-services-view-2\"\n      }}></img></p>\n    <p>{`Finally give the `}<strong parentName=\"p\">{`Application Perspective`}</strong>{` a unique name `}<inlineCode parentName=\"p\">{`<yourname> Robot Shop`}</inlineCode>{` and select `}<strong parentName=\"p\">{`All Calls`}</strong>{`\nClick `}<strong parentName=\"p\">{`Create`}</strong>{` to add and display the perspective.`}<br parentName=\"p\"></br>{`\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-services-view-3.png\",\n        \"alt\": \"instana-services-view-3\"\n      }}></img></p>\n    <p>{`Your `}<strong parentName=\"p\">{`Application Perspective`}</strong>{` should look like this.\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-application-perspective.png\",\n        \"alt\": \"instana-application-perspective\"\n      }}></img></p>\n    <ol {...{\n      \"start\": 8\n    }}>\n      <li parentName=\"ol\">{`Lets look for issues and performance`}</li>\n    </ol>\n    <p>{`If you switch back to the summary tab, you can see that there are erroneous calls reported. Hover over the bars and after some examination click on one of the bars and select `}<inlineCode parentName=\"p\">{`View in Analyse`}</inlineCode>{`.`}</p>\n    <p>{`The view will switch to analyse and show the erroneous calls in the appropriate time period. You should see a lot of calls with issues in the payment service.\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-analyse-erroneouscalls.png\",\n        \"alt\": \"instana-analyse-erroneouscalls\"\n      }}></img></p>\n    <p>{`Clicking on the payment Service should show all calls.\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-analyse-payments.png\",\n        \"alt\": \"instana-analyse-payments\"\n      }}></img></p>\n    <p>{`Select one of the calls see details of this call.\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-analyse-payment-details.png\",\n        \"alt\": \"instana-analyse-payments\"\n      }}></img></p>\n    <p>{`Scroll down to `}<strong parentName=\"p\">{`Calls`}</strong>{` and select the POST call - can see the issue?\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/instana-analyse-payment-calldetails.png\",\n        \"alt\": \"instana-analyse-payment-calldetails\"\n      }}></img></p>\n    <Accordion mdxType=\"Accordion\">\n  <AccordionItem title=\"Issue\" mdxType=\"AccordionItem\">\n        <p>{`You shoud see that the payment checks it the partner exists by issuing a GET call which queries to the database. The database returns an empty object if the partner does not exist, which cannot be validated and therefore reports a `}<inlineCode parentName=\"p\">{`Status Code: 500 - Internal Server Error`}</inlineCode></p>\n        <p>{`Good Job, the error can be fixed now!!!`}</p>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`kubectl set env deployment/load ERROR=0\n`}</code></pre>\n  </AccordionItem>\n    </Accordion>\n    <ol {...{\n      \"start\": 9\n    }}>\n      <li parentName=\"ol\">{`Stop the load`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`kubectl delete deployment load\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}