(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{e97v:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return d}));var a=n("vxd2"),o=n("+ZQ4"),i=(n("tbR7"),n("8ZXK")),r=n("ZUrL"),l=(n("GP0y"),{}),s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(i.b)("div",t)}},c=s("PageDescription"),b=s("InlineNotification"),p=s("Accordion"),u=s("AccordionItem"),m={_frontmatter:l},h=r.a;function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)(h,Object(a.a)({},m,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)(c,{mdxType:"PageDescription"},Object(i.b)("p",null,"In this part of the the lab you will learn how Instana discovers your environment and observe the application you deploex on the infrastructure.")),Object(i.b)("h2",null,"Observe the environment"),Object(i.b)("p",null,"Got to the infrastructure perspective in the Instana UI and filter the view to your environment by by entering ",Object(i.b)("inlineCode",{parentName:"p"},"entity.tag:<your name>")," in the search bar. You can get to the searchbar by pressing the shortcut ",Object(i.b)("inlineCode",{parentName:"p"},"f"),". "),Object(i.b)(b,{kind:"info",mdxType:"InlineNotification"},Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Note:")," You can save your Filter for future reuse by clicking ",Object(i.b)("strong",{parentName:"p"},"Save")," next to the search and specifying a make like your username.")),Object(i.b)("p",null,"Center your environment and zoom in or out. Shortcut for center is ",Object(i.b)("inlineCode",{parentName:"p"},"c"),"."),Object(i.b)("p",null,"On the lower right you find different option to:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Arrange zone"),Object(i.b)("li",{parentName:"ul"},"Configure perspective and groups"),Object(i.b)("li",{parentName:"ul"},"Show tags"),Object(i.b)("li",{parentName:"ul"},"Enable/Disable time windows based aggregation"),Object(i.b)("li",{parentName:"ul"},"Show different metircs"),Object(i.b)("li",{parentName:"ul"},"Zoom in/out")),Object(i.b)("p",null,"Try to filter and group your environment e.g. by:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"everything in the environemnt with the tag ",Object(i.b)("inlineCode",{parentName:"li"},"<your-name>")),Object(i.b)("li",{parentName:"ul"},"everything in the kubernetes namespace ",Object(i.b)("inlineCode",{parentName:"li"},"robot-shop")),Object(i.b)("li",{parentName:"ul"},"grouped by container in a namespace"),Object(i.b)("li",{parentName:"ul"},"showing the CPU load")),Object(i.b)("p",null,"You should have a view like this\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/infrastructure-grouping.png",alt:"infrastructure-grouping"}))),Object(i.b)(p,{mdxType:"Accordion"},Object(i.b)(u,{title:"Solution",mdxType:"AccordionItem"},Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"In the search bar enter ",Object(i.b)("inlineCode",{parentName:"p"},"entity.tag:think21 AND entity.kubernetes.namespace:robot-shop"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Select grouping by ",Object(i.b)("inlineCode",{parentName:"p"},"persective: container and group: kubernetes namespace")," from **Configure perspective and grouping on the lower right")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Select ",Object(i.b)("inlineCode",{parentName:"p"},"CPU load")," from ",Object(i.b)("strong",{parentName:"p"},"Show metrics")," on the lower right"))),Object(i.b)("p",null,"If your interessed in a specific service, e.g. filter to ",Object(i.b)("inlineCode",{parentName:"p"},"entity.tag:service=redis"),"."))),Object(i.b)("p",null,"Reset the infrastructure view to display your environment grouped by host"),Object(i.b)("h2",null,"Examine the environment"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"To get an overview for your host click on the outer box of your host. A popup displaying the hostname and information for the system, tags, interfaces, etc. should appear.\nOpen the accordions and scroll down to see the list of descovered technologies. It should look like this:")),Object(i.b)("img",{src:"./images/instana-infrastructure-host.png",alt:"instana-infrastructure-host"}),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Click on ",Object(i.b)("inlineCode",{parentName:"li"},"Open Dashboard")," to get to a more detailed fullscreen view.\nAll information about you host is available to you. E.g.")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"CPU"),Object(i.b)("li",{parentName:"ul"},"Memory"),Object(i.b)("li",{parentName:"ul"},"Network"),Object(i.b)("li",{parentName:"ul"},"Filesytem"),Object(i.b)("li",{parentName:"ul"},"Processes"),Object(i.b)("li",{parentName:"ul"},"etc.")),Object(i.b)("p",null,"On the top left you can change the time range or releases that is displayed, this might be very helpful if you search for issues during a specific period. The Live view display the actual state in the time period you have selected. Teh information is updated ervery second, so that you see imedeately what is going in your environment."),Object(i.b)("p",null,"At the bottom of the page you can go to the agent managagement to get information about the Instana agent running to this host or make configuration changes to the agent, e.g.:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Change the agent mode (APM, Infrastructure, Disabled)"),Object(i.b)("li",{parentName:"ul"},"Change Log Level (INFO, DEBUG)")),Object(i.b)("p",null,"You can also get a list of sensors information, that is available for the agent. Since we are using the dynamic agent, it should always get acutal sensors from the Instana sensor repository.\nVery helpful is also the option to download the agent logs.\nThe configuration management can also use configuration files from a git repostory, this will enable you to configure all or groups of you agents through a central configuration point."),Object(i.b)("p",null,"Now that you are familar with the inrastructure view, go ahead and do some observation on the application you deployed"),Object(i.b)("h2",null,"Examine the application services"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Lets put on some load")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),'cat <<EOF | kubectl create -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: load\n  labels:\n    service: load\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      service: load\n  template:\n    metadata:\n      labels:\n        service: load\n    spec:\n      containers:\n      - name: load\n        env:\n          - name: HOST\n            value: "http://web:8080/"\n          - name: NUM_CLIENTS\n            value: "15"\n          - name: SILENT\n            value: "1"\n          - name: ERROR\n            value: "1"\n        image: robotshop/rs-load:latest\n        resources:\n          limits:\n            cpu: 200m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\nEOF\n')),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Go to the application view in the Instana UI\nYou will see all applications and services based on your rights. Instana supports multi-tenancy, but for the lab all participants are in the same organization.\nTo create a view for your services click ",Object(i.b)("inlineCode",{parentName:"li"},"+ Add")," and ",Object(i.b)("inlineCode",{parentName:"li"},"New Application Perspective")," on the bottom right.")),Object(i.b)("p",null,"See the different application kinds and the recommendations when to use it. We are moniting an application running on kubernetes, therefore select ",Object(i.b)("strong",{parentName:"p"},"Kubernetes or Container")," and press ",Object(i.b)("strong",{parentName:"p"},"Next"),"\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-services-view-1.png",alt:"instana-services-view-1"}))),Object(i.b)("p",null,"Add a filter to the application perspective to only view the application services running on your cluster. Either click add filter and type the filter or select it from the dropdown menue."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"kubernetes.namespace = robot-shop"),Object(i.b)("li",{parentName:"ul"},"kubernetes.clustername = ","<","your clustername",">")),Object(i.b)("p",null,"Select the donwstream services and click ",Object(i.b)("strong",{parentName:"p"},"Next"),"\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-services-view-2.png",alt:"instana-services-view-2"}))),Object(i.b)("p",null,"Finally give the ",Object(i.b)("strong",{parentName:"p"},"Application Perspective")," a unique name ",Object(i.b)("inlineCode",{parentName:"p"},"<yourname> Robot Shop")," and select ",Object(i.b)("strong",{parentName:"p"},"All Calls"),"\nClick ",Object(i.b)("strong",{parentName:"p"},"Create")," to add and display the perspective.",Object(i.b)("br",{parentName:"p"}),"\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-services-view-3.png",alt:"instana-services-view-3"}))),Object(i.b)("p",null,"Your ",Object(i.b)("strong",{parentName:"p"},"Application Perspective")," should look like this.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-application-perspective.png",alt:"instana-application-perspective"}))),Object(i.b)("ol",{start:8},Object(i.b)("li",{parentName:"ol"},"Lets look for issues and performance")),Object(i.b)("p",null,"If you switch back to the summary tab, you can see that there are erroneous calls reported. Hover over the bars and after some examination click on one of the bars and select ",Object(i.b)("inlineCode",{parentName:"p"},"View in Analyse"),"."),Object(i.b)("p",null,"The view will switch to analyse and show the erroneous calls in the appropriate time period. You should see a lot of calls with issues in the payment service.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-analyse-erroneouscalls.png",alt:"instana-analyse-erroneouscalls"}))),Object(i.b)("p",null,"Clicking on the payment Service should show all calls.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-analyse-payments.png",alt:"instana-analyse-payments"}))),Object(i.b)("p",null,"Select one of the calls see details of this call.\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-analyse-payment-details.png",alt:"instana-analyse-payments"}))),Object(i.b)("p",null,"Scroll down to ",Object(i.b)("strong",{parentName:"p"},"Calls")," and select the POST call - can see the issue?\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-analyse-payment-calldetails.png",alt:"instana-analyse-payment-calldetails"}))),Object(i.b)(p,{mdxType:"Accordion"},Object(i.b)(u,{title:"Issue",mdxType:"AccordionItem"},Object(i.b)("p",null,"You shoud see that the payment checks it the partner exists by issuing a GET call which queries to the database. The database returns an empty object if the partner does not exist, which cannot be validated and therefore reports a ",Object(i.b)("inlineCode",{parentName:"p"},"Status Code: 500 - Internal Server Error")),Object(i.b)("p",null,"Good Job, the error can be fixed now!!!"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"kubectl set env deployment/load ERROR=0\n")))),Object(i.b)("ol",{start:9},Object(i.b)("li",{parentName:"ol"},"Stop the load")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"kubectl delete deployment load\n")))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-instana-lab-observe-mdx-4f2eebc63cecf36ecced.js.map