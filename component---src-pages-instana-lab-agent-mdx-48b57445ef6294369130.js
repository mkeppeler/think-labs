(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{QHlM:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return h}));var a=n("vxd2"),o=n("+ZQ4"),s=(n("tbR7"),n("8ZXK")),i=n("ZUrL"),l=(n("GP0y"),{}),r=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",t)}},c=r("PageDescription"),p=r("Row"),b=r("Column"),u={_frontmatter:l},g=i.a;function h(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(s.b)(g,Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)(c,{mdxType:"PageDescription"},Object(s.b)("p",null,"In this section you will install the Instana Agent to your target environment which you have set up in the previous step.")),Object(s.b)("h2",null,"Installing the Instana Host Agent on Kubernetes"),Object(s.b)("p",null,"While there are are multiple-options like installation on managed services (AWS, Google, IBM Cloud, etc.) or operating systems, such as Linux, Mac OS, Microsoft Windows or Unix, we will install the host agent on a K8s platform (others self-managed platfroms could be Cloud foundry, Docker or OpenShift). A complete list of supported environments is available in the Instana Documentation."),Object(s.b)("p",null,"There two type of agents avavailable, the dynamic or the static host agent. The static agent brings all the sensors to monitor the processes int he environment, whereas the dynamic agent connects to a sensor reposistory and downloads the needed sensors on demand. Also sensor updates are dynamic as new version are made availabe."),Object(s.b)("p",null,"In this lab we will use the dynamic host agent."),Object(s.b)("p",null,"To get to the installation options for K8s navigate in the menue on the left of the Instana UI to ",Object(s.b)("inlineCode",{parentName:"p"},"More -> Agents")," and click on ",Object(s.b)("strong",{parentName:"p"},"Installing Instana Agents")),Object(s.b)(p,{mdxType:"Row"},Object(s.b)(b,{colMd:4,colLg:4,mdxType:"Column"},Object(s.b)("img",{src:"./images/instana-agent.png",alt:"instana-agent"})),Object(s.b)(b,{colMd:4,colLg:4,mdxType:"Column"},Object(s.b)("img",{src:"./images/instana-agent-install.png",alt:"instana-agent-install"}))),Object(s.b)("p",null,"Select Kubernetes as platform"),Object(s.b)("p",null,"You can explore the other platforms and their installation option if you like."),Object(s.b)("p",null,"From the ",Object(s.b)("strong",{parentName:"p"},"Technology")," dropdown select ",Object(s.b)("strong",{parentName:"p"},"Operator")," as installation option. Instana provides also the option to install the agent through a helm chart, or YAML file. YAML files are also available for the managed K8s services on AWS, Google and Azure Cloud.\nThe Operator provides an automated way to install and configure the host agent."),Object(s.b)("img",{src:"./images/instana-operator-select.png",alt:"instana-operator-select"}),Object(s.b)("p",null,"To install the Operator, use the Cloud Shell tab within your browser, that you have configured in the Setup Environment section of this lab."),Object(s.b)("p",null,"Execute the following command to deploy the instana operator into the namespace ",Object(s.b)("inlineCode",{parentName:"p"},"instana-agent")),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"kubectl apply -f https://github.com/instana/instana-agent-operator/releases/latest/download/instana-agent-operator.yaml\n")),Object(s.b)("p",null,"The operator should now be up and running and is waiting for a custom resource definition (crd) to be created.\nYou can check this issuing"),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"kubectl get pods -n instana-agent\n")),Object(s.b)("p",null,"Execute the following with the values from the ",Object(s.b)("strong",{parentName:"p"},"Installing Instana Agents")," page to let the operator deploy the agent."),Object(s.b)("pre",null,Object(s.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),'cat <<EOF | kubectl apply -f -\napiVersion: instana.io/v1beta1\nkind: InstanaAgent\nmetadata:\n  name: instana-agent\n  namespace: instana-agent\nspec:\n  agent.zone.name: IBM Cloud\n  agent.key: <Instana Application Key>\n  agent.endpoint.host: <Instana Service Endpoint>\n  agent.endpoint.port: "443"\n  agent.env:\n    INSTANA_AGENT_TAGS: "<your name>,think21,lab"\n  cluster.name: <your clustername>\n  config.files:\n    configuration.yaml: |\n      # You can leave this empty, or use this to configure your instana agent.\n      # See https://docs.instana.io/setup_and_manage/host_agent/on/kubernetes/\nEOF\n')),Object(s.b)("p",null,"Your agent should now be deployed in the instana-agent namespace."),Object(s.b)("p",null,"Go to the Instana UI and select the infrastructure view in the menue on the left - your environment should appear after a short time."),Object(s.b)("p",null,"You can filter the infrastructure view by entering ",Object(s.b)("inlineCode",{parentName:"p"},"entity.tag:<your name>"),"\n",Object(s.b)("img",Object(a.a)({parentName:"p"},{src:"./images/instana-infrastructure.png",alt:"instana-infrastructure"}))))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-instana-lab-agent-mdx-48b57445ef6294369130.js.map