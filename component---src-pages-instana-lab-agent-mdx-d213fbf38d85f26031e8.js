(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{"013z":function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),s=a("NmYn"),o=a.n(s),l=a("Wbzz"),r=a("Xrax"),c=a("k4MR"),b=a("TSYQ"),p=a.n(b),g=a("QH2O"),u=a.n(g),d=a("qKvR"),m=function(e){var t,a=e.title,n=e.theme,i=e.tabs,s=void 0===i?[]:i;return Object(d.b)("div",{className:p()(u.a.pageHeader,(t={},t[u.a.withTabs]=s.length,t[u.a.darkMode]="dark"===n,t))},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12"},Object(d.b)("h1",{id:"page-title",className:u.a.text},a)))))},A=a("BAC9"),h=function(e){var t=e.relativePagePath,a=e.repository,n=Object(l.useStaticQuery)("1364590287").site.siteMetadata.repository,i=a||n,s=i.baseUrl,o=i.subDirectory,r=s+"/edit/"+i.branch+o+"/src/pages"+t;return s?Object(d.b)("div",{className:"bx--row "+A.row},Object(d.b)("div",{className:"bx--col"},Object(d.b)("a",{className:A.link,href:r},"Edit this page on GitHub"))):null},f=a("FCXl"),O=a("dI71"),j=a("I8xM"),w=function(e){function t(){return e.apply(this,arguments)||this}return Object(O.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,i=n.split("/").filter(Boolean).slice(-1)[0],s=a.map((function(e){var t,a=o()(e,{lower:!0,strict:!0}),s=a===i,r=new RegExp(i+"/?(#.*)?$"),c=n.replace(r,a);return Object(d.b)("li",{key:e,className:p()((t={},t[j.selectedItem]=s,t),j.listItem)},Object(d.b)(l.Link,{className:j.link,to:""+c},e))}));return Object(d.b)("div",{className:j.tabsContainer},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(d.b)("nav",{"aria-label":t},Object(d.b)("ul",{className:j.list},s))))))},t}(i.a.Component),y=a("MjG9"),x=a("CzIb");t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,i=e.Title,s=t.frontmatter,b=void 0===s?{}:s,p=t.relativePagePath,g=t.titleType,u=b.tabs,A=b.title,O=b.theme,j=b.description,N=b.keywords,v=Object(x.a)().interiorTheme,k=Object(l.useStaticQuery)("2456312558").site.pathPrefix,I=k?n.pathname.replace(k,""):n.pathname,T=u?I.split("/").filter(Boolean).slice(-1)[0]||o()(u[0],{lower:!0}):"",E=O||v;return Object(d.b)(c.a,{tabs:u,homepage:!1,theme:E,pageTitle:A,pageDescription:j,pageKeywords:N,titleType:g},Object(d.b)(m,{title:i?Object(d.b)(i,null):A,label:"label",tabs:u,theme:E}),u&&Object(d.b)(w,{title:A,slug:I,tabs:u,currentTab:T}),Object(d.b)(y.a,{padded:!0},a,Object(d.b)(h,{relativePagePath:p})),Object(d.b)(f.a,{pageContext:t,location:n,slug:I,tabs:u,currentTab:T}),Object(d.b)(r.a,null))}},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}},up7R:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return l})),a.d(t,"default",(function(){return m}));var n=a("wx14"),i=a("zLVn"),s=(a("q1tI"),a("7ljp")),o=a("013z"),l=(a("qKvR"),{}),r=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",t)}},c=r("PageDescription"),b=r("Row"),p=r("Column"),g=r("InlineNotification"),u={_frontmatter:l},d=o.a;function m(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(s.b)(d,Object(n.a)({},u,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)(c,{mdxType:"PageDescription"},Object(s.b)("p",null,"In this section you will install the Instana Agent to your target environment which you have set up in the previous step.")),Object(s.b)("h2",null,"Installing the Instana Host Agent on Kubernetes"),Object(s.b)("p",null,"While there are are multiple-options like installation on managed services (AWS, Google, IBM Cloud, etc.) or operating systems, such as Linux, Mac OS, Microsoft Windows or Unix, we will install the host agent on a K8s platform (others self-managed platfroms could be Cloud foundry, Docker or OpenShift). A complete list of supported environments is available in the Instana Documentation."),Object(s.b)("p",null,"There two type of agents avavailable, the dynamic or the static host agent. The static agent brings all the sensors to monitor the processes int he environment, whereas the dynamic agent connects to a sensor reposistory and downloads the needed sensors on demand. Also sensor updates are dynamic as new version are made availabe."),Object(s.b)("p",null,"In this lab we will use the dynamic host agent."),Object(s.b)("p",null,"To get to the installation options for K8s navigate in the menue on the left of the Instana UI to ",Object(s.b)("inlineCode",{parentName:"p"},"More -> Agents")," and click on ",Object(s.b)("strong",{parentName:"p"},"Installing Instana Agents")),Object(s.b)(b,{mdxType:"Row"},Object(s.b)(p,{colMd:4,colLg:4,mdxType:"Column"},Object(s.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"518px"}},"\n      ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"58.68055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8UlEQVQoz4WQ228SQRTG5z8RFntVS6SpTbG7tuwuUG5lly2XpZQChQJtQ2ItQWPVAgUxNr4ZHzQaE+MjPgheGm2iD/5ZnzOj7VuXh1++Od+c803OEDmchFdb56jRNHx6hqu8anJVmT+K/31yJAUihxMwNirYvXeIUDwHs7CHWuMJSrUG1rIV3uyPbfCHLoPd6+vb8EZNEE8ogURuB/sP2wgn8kjRwMPj56g/6iJdrPFXfRaBbLMVI4v4ZhUq3YoodGU2JPoNKNTw0Fr0xyCtGGDf4TtfyQo6xzKUSBJEVMKQ1Agk7ypEqou0vu0Jwr0cxMJSgGoArGcULIMpYQGLSoSHuWlQQDOR2dqFmasiU9yDlszBLYd4z2hooLTsh7Tk44h3vJDVIKJ6EnosxQmEYtw/77GEZpF5LY+5eBW31sqUCuaMMlxa8YJZvcR9a8o8Y14vgEwdvIb96Skc7QEcx0MI7SGutAawtYaw07NAPcco6KzQ/Y7JxnuQ6buvuDF21IftcR8LJ19Q/vgH6Xe/Oa7eAHbqjx19wtVL6dOMz5g6eAMyWX8L27MzCJ2vsHe+Ybx3CvHlL9x8cYYbJz94zXyhawGb7f3ExIMPIK5MHTPbHTiLLThLbcxQnc43ca3QxPWtJq+dpda/ewtYhit7H38BThPr4Rykg6AAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"instana-agent",title:"instana-agent",src:"/think-labs/static/cea8991ce98925cbb17c775822d1657f/d7f6f/instana-agent.png",srcSet:["/think-labs/static/cea8991ce98925cbb17c775822d1657f/7fc1e/instana-agent.png 288w","/think-labs/static/cea8991ce98925cbb17c775822d1657f/d7f6f/instana-agent.png 518w"],sizes:"(max-width: 518px) 100vw, 518px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(s.b)(p,{colMd:4,colLg:4,mdxType:"Column"},Object(s.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"604px"}},"\n      ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"45.833333333333336%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVQoz41Sy0pbURQ9VTop+OhMErUqanpbRUyqRIqohQwcFERQgtWBI8VHqlTHHfkLnXdWKAUdGnwlGk2wpYiCiIW0zUtrHmrVJvcmWd1n5yYDceCGxV7rnHsW+3HFgyoTSkytqO14BVFmwJvpOciIn1/iZyACVUszMpksUqrGkDqfb0OUKRYoPb2wDY1CGOphn5hlw+8HR/i0tMzG/kAYwcgf/Aqd4Ic/gMTFX2jpzJ2morKtC90DIxhxzONRQwsGxhxs6Nndw4ePn3EWP8fOt3043V7sHR4z/x0+RTqbRTKlFarOm4ui6qd4WPscpVSpKDdiWG85Ldukj/KRpYoKQe1LzWd61vQxiOInCiSkqXhsLMwwen2DMCF0dY0gISI1ZanleSR/Tzgh3KhqrkK5FGFogDA28lKGHTnD1zte1K2soM3lYihrawzzhgtN6+vMmymb6a7S6cRiKExtAKJUMaPG2gNLbz9ERR2Gpt6xoc3jQePqKjq3tmB1u2Hd3GQjmdtJS27b3kYHaQMZfgmG+J2obs8tZeb9AsqfvcDg+Fu+OErQMqJR+KIxeAm7sThDcp+ufTr/Sjz+L8lz5BnKKl/22WnlJtgnc7+NllJ54PeFSgtJ0pv/wKwymcc4tWUAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"instana-agent-install",title:"instana-agent-install",src:"/think-labs/static/f35161fcc2c4507dc3d632fb8e20818f/c3ea7/instana-agent-install.png",srcSet:["/think-labs/static/f35161fcc2c4507dc3d632fb8e20818f/7fc1e/instana-agent-install.png 288w","/think-labs/static/f35161fcc2c4507dc3d632fb8e20818f/a5df1/instana-agent-install.png 576w","/think-labs/static/f35161fcc2c4507dc3d632fb8e20818f/c3ea7/instana-agent-install.png 604w"],sizes:"(max-width: 604px) 100vw, 604px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(s.b)("p",null,"Select Kubernetes as platform"),Object(s.b)("p",null,"You can explore the other platforms and their installation option if you like."),Object(s.b)("p",null,"From the ",Object(s.b)("strong",{parentName:"p"},"Technology")," dropdown select ",Object(s.b)("strong",{parentName:"p"},"Operator")," as installation option. Instana provides also the option to install the agent through a helm chart, or YAML file. YAML files are also available for the managed K8s services on AWS, Google and Azure Cloud.\nThe Operator provides an automated way to install and configure the host agent.\n",Object(s.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"44.09722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABYlAAAWJQFJUiTwAAABvUlEQVQoz12RXU8TQRSG91d6a8JP8EpDSLzQGGNQiAlEg7RiobWAGJEYUj+QxJBiAEtAFGmppUuX/ZjZnZ3vmd1xtmg0Tp6LeSfnPXnPHGcQJEFM3ABdAJQSgghlQkqhhJB/UUoo/R9ZnjsepJBoD/KYqACCk27Pb5/h84gM/nAeYS9KGf8XRLm1OyFAQto2JjcmStCZOwjf76KdY75/yvc7Ba0OaR4lCCPGEkJttBiTGFOltYPSNM+t0WJ0pu2TZkITLjHDMJGEKsI1lyLLEqmZMSw3qqgtTmFWSg395svewWy5NrtQL1cX195+aDb3SnPPS9XF+frK68bG1narVFku1Vaqy6vr7z5KpZzNrZ3t3YNPn1sxTKffLF29ef3R47m7k1OVhaXxF8+u3Lg2/mB67Pa98tPaxMv5kVujM08qd+4/nJia4UI4r9Y31hqb9dXGSbvXUeEx9WyEbBjkOxt0RVjI4VBHxMrIFBP+zu1EAEgpLwVG9Ee797Xz87Dd+9btux7wfNj3Q/cicP0AwjQM474fWGnXaie1vw0iACnj1sylRISkTCSUp5QDTFPO7db5ECaE5fIutbb1vwAoYOHat7kWFwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"instana-operator-select",title:"instana-operator-select",src:"/think-labs/static/4817456e6f737e38f7081110082ef594/3cbba/instana-operator-select.png",srcSet:["/think-labs/static/4817456e6f737e38f7081110082ef594/7fc1e/instana-operator-select.png 288w","/think-labs/static/4817456e6f737e38f7081110082ef594/a5df1/instana-operator-select.png 576w","/think-labs/static/4817456e6f737e38f7081110082ef594/3cbba/instana-operator-select.png 1152w","/think-labs/static/4817456e6f737e38f7081110082ef594/0b124/instana-operator-select.png 1728w","/think-labs/static/4817456e6f737e38f7081110082ef594/7c56d/instana-operator-select.png 2034w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(s.b)("p",null,"To install the Operator, use the Cloud Shell tab within your browser, that you have configured in the Setup Environment section of this lab."),Object(s.b)("p",null,"Execute the following command to deploy the instana operator into the namespace ",Object(s.b)("inlineCode",{parentName:"p"},"instana-agent")),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"kubectl apply -f https://github.com/instana/instana-agent-operator/releases/latest/download/instana-agent-operator.yaml\n")),Object(s.b)("p",null,"The operator should now be up and running and is waiting for a custom resource definition (crd) to be created.\nYou can check this issuing"),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"kubectl get pods -n instana-agent\n")),Object(s.b)("p",null,"Execute the following with the values from the ",Object(s.b)("strong",{parentName:"p"},"Installing Instana Agents")," page to let the operator deploy the agent."),Object(s.b)(g,{kind:"info",mdxType:"InlineNotification"},Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Note:")," Replace the values for the following variables with your own"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"<","Instana Application Key",">"),Object(s.b)("li",{parentName:"ul"},"<","Instana Service Endpoint",">"),Object(s.b)("li",{parentName:"ul"},"<","your name",">"),Object(s.b)("li",{parentName:"ul"},"<","your clustername",">"))),Object(s.b)("p",null,"Export Variables:"),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"export INSTANA_APPLICATION_KEY=<Instana Application Key>\nexport INSTANA_SERVICE_ENDPOINT=<Instana Service Endpoint>\nexport NAME=<your name>\nexport CLUSTERNAME=<your clustername>\n")),Object(s.b)("p",null,"Deploy Agent:"),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),'cat <<EOF | kubectl apply -f -\napiVersion: instana.io/v1beta1\nkind: InstanaAgent\nmetadata:\n  name: instana-agent\n  namespace: instana-agent\nspec:\n  agent.zone.name: IBM Cloud\n  agent.key: $INSTANA_APPLICATION_KEY\n  agent.endpoint.host: $INSTANA_SERVICE_ENDPOINT\n  agent.endpoint.port: "443"\n  agent.env:\n    INSTANA_AGENT_TAGS: "$NAME,think21,lab"\n  cluster.name: $CLUSTERNAME\n  config.files:\n    configuration.yaml: |\n      # You can leave this empty, or use this to configure your instana agent.\n      # See https://docs.instana.io/setup_and_manage/host_agent/on/kubernetes/\nEOF\n')),Object(s.b)("p",null,"Your agent should now be deploying in the instana-agent namespace."),Object(s.b)("p",null,"You can check the deployment status by by looking at the agent logs"),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"kubectl logs $(kubectl get pods --no-headers -n instana-agent | grep -v instana-agent-operator | awk '{print $1}') -f -n instana-agent\n")),Object(s.b)("p",null,"Look for ",Object(s.b)("strong",{parentName:"p"},"Instana agent started")),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"2021-05-11T13:31:00.841+00:00 | INFO  | agent-starter                    | AgentBootstrap   | com.instana.agent-bootstrap - 1.2.13 | Starting agent now\n2021-05-11T13:31:00.842+00:00 | INFO  | agent-starter                    | AgentImpl        | com.instana.agent - 1.1.597 | Starting Instana agent.\n2021-05-11T13:31:00.845+00:00 | INFO  | agent-starter                    | AgentImpl        | com.instana.agent - 1.1.597 | Instana agent started.\n")),Object(s.b)(g,{kind:"info",mdxType:"InlineNotification"},Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Note:")," Press CTRL-c to exit the logs")),Object(s.b)("p",null,"Go to the Instana UI and select the infrastructure view in the menue on the left - your environment should appear after a short time."),Object(s.b)("p",null,"You can filter the infrastructure view by entering ",Object(s.b)("inlineCode",{parentName:"p"},"entity.tag:<your name>"),"\n",Object(s.b)("span",Object(n.a)({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1024px"}}),"\n      ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.98611111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQoz42R3WvTUBjG8y/5wTbTmLRJzknSJm2TkzYf56SJyWm6idM6ZChjE8dguxBEKPhx5a0g6OV2oSLolX+CIKiMoaj4J/i2vQmzwuC5eJ/D+Z3n4bzCsmo7hLU8Wje6ou6IyJFwW8GdqmTU1poE2T03SLtBCgN2+qrlCSuaje0ecnrIIj7u+Kany/Y5UT9fQxckDIJhPl+UjCXZWlKslUZL0ts11RYkNzaj3IpyI8gcMuj4meklikcbHpO7keLGdSgFcqcCq7gz6zGVJILYjQw21KIcxVxjXKNcZ0MjKev9lG/u0OubjTADi9nwtCgXah41KEdxMReOC7CKP1jf3vv0+curozdmUurTp4t/JYidEJL1yhFYePFg8vT7j58vX7/vr22oQYYrAVU4WgjvPXz07fjk+eFbMhr/F740T64UA3uZ0P3J46/HJy+O3sXrt9TwzHAzBZjtPpj8+v3n8MPHq1u7AJvJcAG87PTN08kc0dzOVu8/eXZtZ7+Zls2MG6w4E4xmH47iHMrL/oCscbZRqkGOaYGiXJ8J7sAWFsPTnVHeSkfQVo8KLZySWniFlDdu3jsY3b6bjO+Q1fFfX6H98CqX8LsAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(s.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"instana-infrastructure",title:"instana-infrastructure",src:"/think-labs/static/1bab59b88f6997546287a9efc95b59a4/2faef/instana-infrastructure.png",srcSet:["/think-labs/static/1bab59b88f6997546287a9efc95b59a4/7fc1e/instana-infrastructure.png 288w","/think-labs/static/1bab59b88f6997546287a9efc95b59a4/a5df1/instana-infrastructure.png 576w","/think-labs/static/1bab59b88f6997546287a9efc95b59a4/2faef/instana-infrastructure.png 1024w"],sizes:"(max-width: 1024px) 100vw, 1024px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-instana-lab-agent-mdx-d213fbf38d85f26031e8.js.map